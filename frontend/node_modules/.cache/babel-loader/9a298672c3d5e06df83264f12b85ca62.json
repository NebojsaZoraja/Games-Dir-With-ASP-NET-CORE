{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Neboj\\u0161a/Desktop/Games_Dir/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Neboj\\u0161a/Desktop/Games_Dir/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Neboj\\u0161a/Desktop/Games_Dir/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{PayPalButton}from\"react-paypal-button-v2\";import{Collapse,Card,Col,Row,Button,Dropdown}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{getOrderDetails,payOrder}from\"../actions/orderActions\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{ORDER_CREATE_RESET,ORDER_PAY_RESET}from\"../constatns/orderConstants\";import{removeFromCart}from\"../actions/cartActions\";import Meta from\"../components/Meta\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OrderScreen=function OrderScreen(_ref){var match=_ref.match,history=_ref.history;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),sdkReady=_useState4[0],setSdkReady=_useState4[1];var orderId=match.params.id;var dispatch=useDispatch();var orderDetails=useSelector(function(state){return state.orderDetails;});var order=orderDetails.order,loading=orderDetails.loading,error=orderDetails.error;var orderPay=useSelector(function(state){return state.orderPay;});var loadingPay=orderPay.loading,successPay=orderPay.success;useEffect(function(){var addPayPalScript=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,clientId,script;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/config/paypal\");case 2:_yield$axios$get=_context.sent;clientId=_yield$axios$get.data;script=document.createElement(\"script\");script.type=\"text/javascript\";script.src=\"https://www.paypal.com/sdk/js?client-id=\".concat(clientId);script.async=true;script.onload=function(){setSdkReady(true);};document.body.appendChild(script);case 10:case\"end\":return _context.stop();}}},_callee);}));return function addPayPalScript(){return _ref2.apply(this,arguments);};}();if(!order||successPay||order._id!==orderId){dispatch(getOrderDetails(orderId));dispatch({type:ORDER_PAY_RESET});}else if(!order.isPaid){if(!window.paypal){addPayPalScript();}else{setSdkReady(true);}}},[dispatch,orderId,successPay,order]);var successPaymentHandler=function successPaymentHandler(paymentResult){dispatch(payOrder(orderId,paymentResult));dispatch(removeFromCart(order.orderItem.game));};var handleBackToHome=function handleBackToHome(){history.replace(\"/\");dispatch({type:ORDER_CREATE_RESET});};return loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Meta,{title:\"Order | \".concat(order.orderItem.title)}),/*#__PURE__*/_jsx(Button,{variant:\"dark\",onClick:handleBackToHome,children:\"Back to Homepage\"}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsx(Col,{lg:5,children:/*#__PURE__*/_jsxs(Card,{style:{backgroundColor:\"indigo\"},children:[/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",variant:\"flush\",children:/*#__PURE__*/_jsx(Col,{lg:10,style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Order: \",orderId]})})}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsxs(Col,{lg:4,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\"Product:\",\" \"]}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\" \",order.orderItem.title,\" \"]})]}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsxs(Col,{lg:4,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\"Account:\",\" \"]}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\" \",order.user.name,\" \"]})]}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsxs(Col,{lg:4,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\"Price:\",\" \"]}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\" \",\"$\",order.orderItem.price,\" \"]})]}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsxs(Col,{lg:4,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\"Payment Method:\",\" \"]}),/*#__PURE__*/_jsxs(Col,{lg:6,className:\"py-2\",style:{borderBottom:\"solid\",borderWidth:\"0.5px\",textAlign:\"center\"},as:\"h5\",children:[\" \",order.paymentMethod,\" \"]})]}),!order.isPaid?/*#__PURE__*/_jsx(Row,{className:\"justify-content-center py-2\",children:/*#__PURE__*/_jsxs(Col,{lg:11,style:{textAlign:\"center\"},as:\"h5\",children:[loadingPay&&/*#__PURE__*/_jsx(Loader,{}),!sdkReady?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(PayPalButton,{amount:order.totalPrice,onSuccess:successPaymentHandler})]})}):/*#__PURE__*/_jsx(Row,{className:\"justify-content-center py-2\",children:/*#__PURE__*/_jsx(Col,{lg:11,style:{textAlign:\"center\"},as:\"h5\",children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{lg:8,className:\"py-2\",style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Button,{variant:\"dark\",style:{width:\"100%\"},onClick:function onClick(){return setOpen(!open);},\"aria-controls\":\"example-collapse-text\",\"aria-expanded\":open,children:\"Click to see your product key\"}),/*#__PURE__*/_jsx(Collapse,{in:open,className:\"my-1\",children:/*#__PURE__*/_jsx(Dropdown,{children:/*#__PURE__*/_jsx(Card.Header,{children:/*#__PURE__*/_jsx(\"p\",{children:order.productKey})})})})]})})})})]})})})]});};export default OrderScreen;","map":{"version":3,"sources":["C:/Users/Neboj≈°a/Desktop/Games_Dir/frontend/src/screens/OrderScreen.jsx"],"names":["axios","React","useEffect","useState","PayPalButton","Collapse","Card","Col","Row","Button","Dropdown","useDispatch","useSelector","getOrderDetails","payOrder","Loader","Message","ORDER_CREATE_RESET","ORDER_PAY_RESET","removeFromCart","Meta","OrderScreen","match","history","open","setOpen","sdkReady","setSdkReady","orderId","params","id","dispatch","orderDetails","state","order","loading","error","orderPay","loadingPay","successPay","success","addPayPalScript","get","clientId","data","script","document","createElement","type","src","async","onload","body","appendChild","_id","isPaid","window","paypal","successPaymentHandler","paymentResult","orderItem","game","handleBackToHome","replace","title","backgroundColor","borderBottom","borderWidth","textAlign","user","name","price","paymentMethod","totalPrice","width","productKey"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport { Collapse, Card, Col, Row, Button, Dropdown } from \"react-bootstrap\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getOrderDetails, payOrder } from \"../actions/orderActions\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport {\r\n  ORDER_CREATE_RESET,\r\n  ORDER_PAY_RESET,\r\n} from \"../constatns/orderConstants\";\r\nimport { removeFromCart } from \"../actions/cartActions\";\r\nimport Meta from \"../components/Meta\";\r\n\r\nconst OrderScreen = ({ match, history }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [sdkReady, setSdkReady] = useState();\r\n  const orderId = match.params.id;\r\n  const dispatch = useDispatch();\r\n\r\n  const orderDetails = useSelector((state) => state.orderDetails);\r\n  let { order, loading, error } = orderDetails;\r\n\r\n  const orderPay = useSelector((state) => state.orderPay);\r\n  const { loading: loadingPay, success: successPay } = orderPay;\r\n\r\n  useEffect(() => {\r\n    const addPayPalScript = async () => {\r\n      const { data: clientId } = await axios.get(\"/api/config/paypal\");\r\n      const script = document.createElement(\"script\");\r\n      script.type = \"text/javascript\";\r\n      script.src = `https://www.paypal.com/sdk/js?client-id=${clientId}`;\r\n      script.async = true;\r\n      script.onload = () => {\r\n        setSdkReady(true);\r\n      };\r\n\r\n      document.body.appendChild(script);\r\n    };\r\n\r\n    if (!order || successPay || order._id !== orderId) {\r\n      dispatch(getOrderDetails(orderId));\r\n      dispatch({ type: ORDER_PAY_RESET });\r\n    } else if (!order.isPaid) {\r\n      if (!window.paypal) {\r\n        addPayPalScript();\r\n      } else {\r\n        setSdkReady(true);\r\n      }\r\n    }\r\n  }, [dispatch, orderId, successPay, order]);\r\n\r\n  const successPaymentHandler = (paymentResult) => {\r\n    dispatch(payOrder(orderId, paymentResult));\r\n    dispatch(removeFromCart(order.orderItem.game));\r\n  };\r\n\r\n  const handleBackToHome = () => {\r\n    history.replace(\"/\");\r\n    dispatch({ type: ORDER_CREATE_RESET });\r\n  };\r\n\r\n  return loading ? (\r\n    <Loader />\r\n  ) : error ? (\r\n    <Message variant=\"danger\">{error}</Message>\r\n  ) : (\r\n    <>\r\n      <Meta title={`Order | ${order.orderItem.title}`} />\r\n      <Button variant=\"dark\" onClick={handleBackToHome}>\r\n        Back to Homepage\r\n      </Button>\r\n      <Row className=\"justify-content-center\">\r\n        <Col lg={5}>\r\n          <Card style={{ backgroundColor: \"indigo\" }}>\r\n            <Row className=\"justify-content-center\" variant=\"flush\">\r\n              <Col\r\n                lg={10}\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n              >\r\n                <h3>Order: {orderId}</h3>\r\n              </Col>\r\n            </Row>\r\n            <Row className=\"justify-content-center\">\r\n              <Col\r\n                lg={4}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                Product:{\" \"}\r\n              </Col>\r\n              <Col\r\n                lg={6}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                {\" \"}\r\n                {order.orderItem.title}{\" \"}\r\n              </Col>\r\n            </Row>\r\n            <Row className=\"justify-content-center\">\r\n              <Col\r\n                lg={4}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                Account:{\" \"}\r\n              </Col>\r\n              <Col\r\n                lg={6}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                {\" \"}\r\n                {order.user.name}{\" \"}\r\n              </Col>\r\n            </Row>\r\n            <Row className=\"justify-content-center\">\r\n              <Col\r\n                lg={4}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                Price:{\" \"}\r\n              </Col>\r\n              <Col\r\n                lg={6}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                {\" \"}\r\n                ${order.orderItem.price}{\" \"}\r\n              </Col>\r\n            </Row>\r\n            <Row className=\"justify-content-center\">\r\n              <Col\r\n                lg={4}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                Payment Method:{\" \"}\r\n              </Col>\r\n              <Col\r\n                lg={6}\r\n                className=\"py-2\"\r\n                style={{\r\n                  borderBottom: \"solid\",\r\n                  borderWidth: \"0.5px\",\r\n                  textAlign: \"center\",\r\n                }}\r\n                as=\"h5\"\r\n              >\r\n                {\" \"}\r\n                {order.paymentMethod}{\" \"}\r\n              </Col>\r\n            </Row>\r\n            {!order.isPaid ? (\r\n              <Row className=\"justify-content-center py-2\">\r\n                <Col lg={11} style={{ textAlign: \"center\" }} as=\"h5\">\r\n                  {loadingPay && <Loader />}\r\n                  {!sdkReady ? (\r\n                    <Loader />\r\n                  ) : (\r\n                    <PayPalButton\r\n                      amount={order.totalPrice}\r\n                      onSuccess={successPaymentHandler}\r\n                    />\r\n                  )}\r\n                </Col>\r\n              </Row>\r\n            ) : (\r\n              <Row className=\"justify-content-center py-2\">\r\n                <Col lg={11} style={{ textAlign: \"center\" }} as=\"h5\">\r\n                  <Row className=\"justify-content-center\">\r\n                    <Col\r\n                      lg={8}\r\n                      className=\"py-2\"\r\n                      style={{\r\n                        textAlign: \"center\",\r\n                      }}\r\n                    >\r\n                      <Button\r\n                        variant=\"dark\"\r\n                        style={{\r\n                          width: \"100%\",\r\n                        }}\r\n                        onClick={() => setOpen(!open)}\r\n                        aria-controls=\"example-collapse-text\"\r\n                        aria-expanded={open}\r\n                      >\r\n                        Click to see your product key\r\n                      </Button>\r\n                      <Collapse in={open} className=\"my-1\">\r\n                        <Dropdown>\r\n                          <Card.Header>\r\n                            <p>{order.productKey}</p>\r\n                          </Card.Header>\r\n                        </Dropdown>\r\n                      </Collapse>\r\n                    </Col>\r\n                  </Row>\r\n                </Col>\r\n              </Row>\r\n            )}\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OrderScreen;\r\n"]},"metadata":{},"sourceType":"module"}