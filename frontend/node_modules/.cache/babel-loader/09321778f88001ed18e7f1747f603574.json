{"ast":null,"code":"import _slicedToArray from\"C:/Users/Neboj\\u0161a/Desktop/Games_Dir/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{Row,Col,Image,ListGroup,Card,Button,Form}from\"react-bootstrap\";import Rating from\"../components/Rating\";import{listGameDetails,createGameReview}from\"../actions/gameActions\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{GAME_CREATE_REVIEW_RESET}from\"../constatns/gameConstatns\";import Meta from\"../components/Meta\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var GameScreen=function GameScreen(_ref){var match=_ref.match,history=_ref.history;var dispatch=useDispatch();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),rating=_useState2[0],setRating=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),minReq=_useState6[0],setMinReq=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),recReq=_useState8[0],setRecReq=_useState8[1];var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var gameReviewCreate=useSelector(function(state){return state.gameReviewCreate;});var successGameReview=gameReviewCreate.success,errorGameReview=gameReviewCreate.error;var gameDetails=useSelector(function(state){return state.gameDetails;});var loading=gameDetails.loading,error=gameDetails.error,game=gameDetails.game;useEffect(function(){if(successGameReview){alert(\"Review Submitted!\");setRating(0);setComment(\"\");dispatch({type:GAME_CREATE_REVIEW_RESET});}if(!loading){setMinReq(game.minRequirements.toString().split(\"_\"));setRecReq(game.recRequirements.toString().split(\"_\"));}dispatch(listGameDetails(match.params.id));},[dispatch,match,successGameReview,game,loading]);var buyNowHandler=function buyNowHandler(){if(userInfo){history.push(\"/overview/\".concat(match.params.id));}else{history.push(\"/login?redirect=overview/\".concat(game._id));}};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(createGameReview(match.params.id,{rating:rating,comment:comment}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Meta,{title:game.title}),/*#__PURE__*/_jsx(Button,{className:\"btn btn-light my-3\",onClick:function onClick(){return history.goBack();},style:{textDecoration:\"none\"},children:\"Go back\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center my-2\",children:[/*#__PURE__*/_jsx(Col,{md:8,lg:7,xs:12,children:/*#__PURE__*/_jsx(Image,{src:game.image,alt:game.title,style:{height:\"100%\",width:\"100%\"},fluid:true})}),/*#__PURE__*/_jsx(Col,{md:4,sm:4,lg:3,xs:12,className:\"mt-2 mt-lg-4 mt-md-0\",children:/*#__PURE__*/_jsx(Card,{bg:\"light\",children:/*#__PURE__*/_jsxs(ListGroup,{style:{width:\"100%\"},children:[/*#__PURE__*/_jsxs(ListGroup.Item,{style:{borderBottom:\"solid\",borderWidth:\"0.5px\"},children:[/*#__PURE__*/_jsxs(Row,{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(Col,{as:\"h5\",children:\"Price:\"}),/*#__PURE__*/_jsx(Col,{as:\"h5\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"$\",game.price]})})]}),/*#__PURE__*/_jsx(Row,{as:\"h5\",className:\"mt-3 \",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"})}),/*#__PURE__*/_jsx(Row,{as:\"h4\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"strong\",{children:game.numberInStock>0?\"In Stock\":\"Out Of Stock\"})})]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Button,{onClick:buyNowHandler,style:{backgroundColor:\"dodgerblue\",borderColor:\"dodgerblue\"},type:\"button\",disabled:game.numberInStock===0,children:game.numberInStock>0?\"Buy now\":\"Out Of Stock\"})})})]})})})]}),/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center my-lg-3 py-lg-3 my-3 py-3\",style:{borderTop:\"solid\",borderWidth:\"0.5px\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Description\"}),/*#__PURE__*/_jsx(Col,{lg:10,children:/*#__PURE__*/_jsx(Card,{bg:\"light\",children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{style:{textAlign:\"center\",borderBottom:\"solid\",borderWidth:\"0.5px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:game.title}),/*#__PURE__*/_jsxs(\"h5\",{children:[\"Publisher: \",game.publisher]}),/*#__PURE__*/_jsx(Rating,{value:game.rating,text:\"\".concat(game.numReviews,\" reviews\")})]}),/*#__PURE__*/_jsx(ListGroup.Item,{style:{borderBottom:\"solid\",borderWidth:\"0.5px\"},children:/*#__PURE__*/_jsx(\"p\",{className:\"px-lg-5\",style:{whiteSpace:\"pre-line\"},children:game.description})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsx(Col,{lg:5,style:{borderRight:\"solid\",borderWidth:\"0.5px\"},children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"MINIMUM:\"}),minReq.map(function(requirement){return/*#__PURE__*/_jsx(\"li\",{children:requirement},requirement);})]})}),/*#__PURE__*/_jsx(Col,{lg:5,children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"RECOMMENDED:\"}),recReq.map(function(requirement){return/*#__PURE__*/_jsx(\"li\",{children:requirement},requirement);})]})})]})})]})})})]}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-center my-lg-3 py-lg-3 my-3 py-3\",style:{borderTop:\"solid\",borderWidth:\"0.5px\"},children:/*#__PURE__*/_jsxs(Col,{lg:6,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Reviews\"}),game.reviews.length===0&&/*#__PURE__*/_jsx(Message,{variant:\"warning\",children:\"No Reviews\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[game.reviews.map(function(review){return/*#__PURE__*/_jsxs(ListGroup.Item,{style:{borderBottom:\"solid\",borderWidth:\"0.5px\"},children:[/*#__PURE__*/_jsx(\"h5\",{children:review.name}),/*#__PURE__*/_jsx(Rating,{value:review.rating}),/*#__PURE__*/_jsx(\"p\",{children:review.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"p\",{children:review.comment})]},review._id);}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Write a Review\"}),errorGameReview&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorGameReview}),userInfo?/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"rating\",className:\"my-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Rating\"}),/*#__PURE__*/_jsxs(Form.Select,{style:{border:\"1px solid black\",color:\"black\",width:\"50%\"},value:rating,onChange:function onChange(e){return setRating(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",style:{color:\"black\"},children:\"Select...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",style:{color:\"black\"},children:\"1 - Poor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",style:{color:\"black\"},children:\"2 - Fair\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",style:{color:\"black\"},children:\"3 - Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",style:{color:\"black\"},children:\"4 - Very Good\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",style:{color:\"black\"},children:\"5 - Excellent\"})]})]}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Form.Group,{controlId:\"comment\",className:\"my-3\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{color:\"black\"},children:\"Comment:\"}),/*#__PURE__*/_jsx(Form.Control,{style:{border:\"1px solid black\",color:\"black\"},type:\"text\",placeholder:\"Write a comment...\",value:comment,as:\"textarea\",onChange:function onChange(e){return setComment(e.target.value);}})]})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Submit\"})]}):/*#__PURE__*/_jsxs(Message,{children:[\"Please\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/login?redirect=game/\".concat(game._id),style:{color:\"black\"},children:\"Sign in\"}),\" \",\"to write a review\"]})]})]})})]})})]})]});};export default GameScreen;","map":{"version":3,"sources":["C:/Users/Neboj≈°a/Desktop/Games_Dir/frontend/src/screens/GameScreen.jsx"],"names":["React","useEffect","useState","Link","useDispatch","useSelector","Row","Col","Image","ListGroup","Card","Button","Form","Rating","listGameDetails","createGameReview","Loader","Message","GAME_CREATE_REVIEW_RESET","Meta","GameScreen","match","history","dispatch","rating","setRating","comment","setComment","minReq","setMinReq","recReq","setRecReq","userLogin","state","userInfo","gameReviewCreate","successGameReview","success","errorGameReview","error","gameDetails","loading","game","alert","type","minRequirements","toString","split","recRequirements","params","id","buyNowHandler","push","_id","submitHandler","e","preventDefault","title","goBack","textDecoration","image","height","width","borderBottom","borderWidth","textAlign","price","numberInStock","backgroundColor","borderColor","borderTop","publisher","numReviews","whiteSpace","description","borderRight","map","requirement","reviews","length","review","name","createdAt","substring","border","color","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  Row,\r\n  Col,\r\n  Image,\r\n  ListGroup,\r\n  Card,\r\n  Button,\r\n  Form,\r\n} from \"react-bootstrap\";\r\nimport Rating from \"../components/Rating\";\r\nimport { listGameDetails, createGameReview } from \"../actions/gameActions\";\r\nimport Loader from \"../components/Loader\";\r\nimport Message from \"../components/Message\";\r\nimport { GAME_CREATE_REVIEW_RESET } from \"../constatns/gameConstatns\";\r\nimport Meta from \"../components/Meta\";\r\n\r\nconst GameScreen = ({ match, history }) => {\r\n  const dispatch = useDispatch();\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState(\"\");\r\n  const [minReq, setMinReq] = useState([]);\r\n  const [recReq, setRecReq] = useState([]);\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { userInfo } = userLogin;\r\n\r\n  const gameReviewCreate = useSelector((state) => state.gameReviewCreate);\r\n  const { success: successGameReview, error: errorGameReview } =\r\n    gameReviewCreate;\r\n\r\n  const gameDetails = useSelector((state) => state.gameDetails);\r\n  const { loading, error, game } = gameDetails;\r\n\r\n  useEffect(() => {\r\n    if (successGameReview) {\r\n      alert(\"Review Submitted!\");\r\n      setRating(0);\r\n      setComment(\"\");\r\n      dispatch({ type: GAME_CREATE_REVIEW_RESET });\r\n    }\r\n    if (!loading) {\r\n      setMinReq(game.minRequirements.toString().split(\"_\"));\r\n      setRecReq(game.recRequirements.toString().split(\"_\"));\r\n    }\r\n    dispatch(listGameDetails(match.params.id));\r\n  }, [dispatch, match, successGameReview, game, loading]);\r\n\r\n  const buyNowHandler = () => {\r\n    if (userInfo) {\r\n      history.push(`/overview/${match.params.id}`);\r\n    } else {\r\n      history.push(`/login?redirect=overview/${game._id}`);\r\n    }\r\n  };\r\n\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(createGameReview(match.params.id, { rating, comment }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Meta title={game.title} />\r\n      <Button\r\n        className=\"btn btn-light my-3\"\r\n        onClick={() => history.goBack()}\r\n        style={{\r\n          textDecoration: \"none\",\r\n        }}\r\n      >\r\n        Go back\r\n      </Button>\r\n      {loading ? (\r\n        <Loader />\r\n      ) : error ? (\r\n        <Message variant=\"danger\">{error}</Message>\r\n      ) : (\r\n        <>\r\n          <Row className=\"justify-content-center my-2\">\r\n            <Col md={8} lg={7} xs={12}>\r\n              <Image\r\n                src={game.image}\r\n                alt={game.title}\r\n                style={{ height: \"100%\", width: \"100%\" }}\r\n                fluid\r\n              />\r\n            </Col>\r\n            <Col md={4} sm={4} lg={3} xs={12} className=\"mt-2 mt-lg-4 mt-md-0\">\r\n              <Card bg=\"light\">\r\n                <ListGroup style={{ width: \"100%\" }}>\r\n                  <ListGroup.Item\r\n                    style={{ borderBottom: \"solid\", borderWidth: \"0.5px\" }}\r\n                  >\r\n                    <Row style={{ textAlign: \"center\" }}>\r\n                      <Col as=\"h5\">Price:</Col>\r\n                      <Col as=\"h5\">\r\n                        <strong>${game.price}</strong>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row\r\n                      as=\"h5\"\r\n                      className=\"mt-3 \"\r\n                      style={{ textAlign: \"center\" }}\r\n                    >\r\n                      <strong>Status:</strong>\r\n                    </Row>\r\n                    <Row as=\"h4\" style={{ textAlign: \"center\" }}>\r\n                      <strong>\r\n                        {game.numberInStock > 0 ? \"In Stock\" : \"Out Of Stock\"}\r\n                      </strong>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row>\r\n                      <Button\r\n                        onClick={buyNowHandler}\r\n                        style={{\r\n                          backgroundColor: \"dodgerblue\",\r\n                          borderColor: \"dodgerblue\",\r\n                        }}\r\n                        type=\"button\"\r\n                        disabled={game.numberInStock === 0}\r\n                      >\r\n                        {game.numberInStock > 0 ? \"Buy now\" : \"Out Of Stock\"}\r\n                      </Button>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <Row\r\n            className=\"justify-content-center my-lg-3 py-lg-3 my-3 py-3\"\r\n            style={{ borderTop: \"solid\", borderWidth: \"0.5px\" }}\r\n          >\r\n            <h2 className=\"text-center\">Description</h2>\r\n            <Col lg={10}>\r\n              <Card bg=\"light\">\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item\r\n                    style={{\r\n                      textAlign: \"center\",\r\n                      borderBottom: \"solid\",\r\n                      borderWidth: \"0.5px\",\r\n                    }}\r\n                  >\r\n                    <h3>{game.title}</h3>\r\n                    <h5>Publisher: {game.publisher}</h5>\r\n                    <Rating\r\n                      value={game.rating}\r\n                      text={`${game.numReviews} reviews`}\r\n                    />\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item\r\n                    style={{ borderBottom: \"solid\", borderWidth: \"0.5px\" }}\r\n                  >\r\n                    <p className=\"px-lg-5\" style={{ whiteSpace: \"pre-line\" }}>\r\n                      {game.description}\r\n                    </p>\r\n                  </ListGroup.Item>\r\n                  <ListGroup.Item>\r\n                    <Row className=\"justify-content-center\">\r\n                      <Col\r\n                        lg={5}\r\n                        style={{ borderRight: \"solid\", borderWidth: \"0.5px\" }}\r\n                      >\r\n                        <ul>\r\n                          <strong>MINIMUM:</strong>\r\n                          {minReq.map((requirement) => (\r\n                            <li key={requirement}>{requirement}</li>\r\n                          ))}\r\n                        </ul>\r\n                      </Col>\r\n                      <Col lg={5}>\r\n                        <ul>\r\n                          <strong>RECOMMENDED:</strong>\r\n                          {recReq.map((requirement) => (\r\n                            <li key={requirement}>{requirement}</li>\r\n                          ))}\r\n                        </ul>\r\n                      </Col>\r\n                    </Row>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n          <Row\r\n            className=\"justify-content-center my-lg-3 py-lg-3 my-3 py-3\"\r\n            style={{ borderTop: \"solid\", borderWidth: \"0.5px\" }}\r\n          >\r\n            <Col lg={6}>\r\n              <h2 className=\"text-center\">Reviews</h2>\r\n              {game.reviews.length === 0 && (\r\n                <Message variant=\"warning\">No Reviews</Message>\r\n              )}\r\n              <Card>\r\n                <ListGroup variant=\"flush\">\r\n                  {game.reviews.map((review) => (\r\n                    <ListGroup.Item\r\n                      key={review._id}\r\n                      style={{ borderBottom: \"solid\", borderWidth: \"0.5px\" }}\r\n                    >\r\n                      <h5>{review.name}</h5>\r\n                      <Rating value={review.rating} />\r\n                      <p>{review.createdAt.substring(0, 10)}</p>\r\n                      <p>{review.comment}</p>\r\n                    </ListGroup.Item>\r\n                  ))}\r\n                  <ListGroup.Item>\r\n                    <h2>Write a Review</h2>\r\n                    {errorGameReview && (\r\n                      <Message variant=\"danger\">{errorGameReview}</Message>\r\n                    )}\r\n                    {userInfo ? (\r\n                      <Form onSubmit={submitHandler}>\r\n                        <Form.Group controlId=\"rating\" className=\"my-3\">\r\n                          <Form.Label>Rating</Form.Label>\r\n                          <Form.Select\r\n                            style={{\r\n                              border: \"1px solid black\",\r\n                              color: \"black\",\r\n                              width: \"50%\",\r\n                            }}\r\n                            value={rating}\r\n                            onChange={(e) => setRating(e.target.value)}\r\n                          >\r\n                            <option value=\"\" style={{ color: \"black\" }}>\r\n                              Select...\r\n                            </option>\r\n                            <option value=\"1\" style={{ color: \"black\" }}>\r\n                              1 - Poor\r\n                            </option>\r\n                            <option value=\"2\" style={{ color: \"black\" }}>\r\n                              2 - Fair\r\n                            </option>\r\n                            <option value=\"3\" style={{ color: \"black\" }}>\r\n                              3 - Good\r\n                            </option>\r\n                            <option value=\"4\" style={{ color: \"black\" }}>\r\n                              4 - Very Good\r\n                            </option>\r\n                            <option value=\"5\" style={{ color: \"black\" }}>\r\n                              5 - Excellent\r\n                            </option>\r\n                          </Form.Select>\r\n                        </Form.Group>\r\n                        <Col>\r\n                          <Form.Group controlId=\"comment\" className=\"my-3\">\r\n                            <Form.Label style={{ color: \"black\" }}>\r\n                              Comment:\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                              style={{\r\n                                border: \"1px solid black\",\r\n                                color: \"black\",\r\n                              }}\r\n                              type=\"text\"\r\n                              placeholder=\"Write a comment...\"\r\n                              value={comment}\r\n                              as=\"textarea\"\r\n                              onChange={(e) => setComment(e.target.value)}\r\n                            ></Form.Control>\r\n                          </Form.Group>\r\n                        </Col>\r\n                        <Button type=\"submit\" variant=\"primary\">\r\n                          Submit\r\n                        </Button>\r\n                      </Form>\r\n                    ) : (\r\n                      <Message>\r\n                        Please{\" \"}\r\n                        <Link\r\n                          to={`/login?redirect=game/${game._id}`}\r\n                          style={{ color: \"black\" }}\r\n                        >\r\n                          Sign in\r\n                        </Link>{\" \"}\r\n                        to write a review\r\n                      </Message>\r\n                    )}\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GameScreen;\r\n"]},"metadata":{},"sourceType":"module"}